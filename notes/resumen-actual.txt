ğŸ“˜ Proyecto QMP â€” Resumen completo del sistema y del flujo
ğŸ¯ Objetivo general
Construir y mantener un sitio literario/poÃ©tico diario que sea:
Editorialmente sobrio (experiencia de lectura prioritaria)
RÃ¡pido (un comando para publicar)
Seguro (validaciones, dry-run, nada irreversible)
Flexible (crear y editar entradas pasadas)
Humano (el autor decide todo el contenido)
Sin dependencia de servicios de pago
Sostenible en el tiempo
El sistema separa estrictamente:
contenido (texto),
datos (JSON),
presentaciÃ³n (HTML/CSS),
lÃ³gica (JS / scripts locales).
ğŸ§± Estructura del proyecto
qmp/
â”œâ”€â”€ index.html
â”œâ”€â”€ archivo.html
â”œâ”€â”€ passe.html
â”œâ”€â”€ style.css
â”œâ”€â”€ script.js
â”œâ”€â”€ archivo.json              # Ã­ndice Ãºnico del sitio
â”œâ”€â”€ textos/
â”‚   â”œâ”€â”€ YYYY-MM-DD.txt        # textos diarios (poema + citas + anÃ¡lisis)
â”‚   â””â”€â”€ templateTEXT.txt
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ merge_pending.py
â”‚   â”œâ”€â”€ qmp_publish.sh
â”‚   â”œâ”€â”€ qd.sh
â”‚   â”œâ”€â”€ pending_entry.json   # temporal (se borra tras publicar)
â”‚   â”œâ”€â”€ pending_keywords.txt # temporal (no se borra)
â”œâ”€â”€ logs/
â”‚   â””â”€â”€ publish_log.jsonl     # log append-only de publicaciones
âœï¸ Flujo creativo diario (local)
1) Preparar la sesiÃ³n
Desde cualquier directorio:
qd
# o
qd YYYY-MM-DD
Hace:
crea textos/YYYY-MM-DD.txt desde plantilla solo si no existe
abre en el editor:
el .txt
scripts/pending_keywords.txt
archivo.json solo si la fecha ya existe (modo ediciÃ³n)
2) Escribir
Escribes el poema y el anÃ¡lisis en el .txt
Pegas keywords manuales (JSON con pesos) en pending_keywords.txt
Las keywords no se infieren
Se generan conscientemente (p. ej. con ChatGPT, sin API)
3) Probar (sin riesgo)
q --dry-run YYYY-MM-DD
Hace:
genera pending_entry.json
valida:
formato de fecha
estructura del texto
JSON de keywords
detecta:
entrada nueva o ediciÃ³n
muestra el mensaje de commit
no toca git
no modifica archivo.json
4) Publicar
q YYYY-MM-DD
Hace:
upsert automÃ¡tico:
si la fecha no existe â†’ crea entrada
si existe â†’ edita entrada
actualiza archivo.json
aÃ±ade una lÃ­nea a logs/publish_log.jsonl
commit automÃ¡tico + push a GitHub
borra pending_entry.json
deja pending_keywords.txt intacto
ğŸ§  Decisiones editoriales clave
Crear vs editar
No hay comandos distintos:
la fecha decide todo.
Commit messages
AutomÃ¡ticos y semÃ¡nticos:
Nueva entrada:
Entrada 2025-12-27 â€” TÃ­tulo
EdiciÃ³n:
EdiciÃ³n 2025-12-25 â€” TÃ­tulo
(TÃ­tulo o primer verso si no hay tÃ­tulo.)
ğŸ§© Reglas de contenido (muy importantes)
my_poem_title
opcional
si existe â†’ NO se genera snippet
my_poem_snippet
âŒ nunca se autogenera si hay tÃ­tulo
âœ… solo existe si:
no hay tÃ­tulo, o
el autor lo define explÃ­citamente
Poema citado
âŒ ningÃºn snippet se infiere
âœ… solo existe si el autor lo da explÃ­citamente
ğŸ‘‰ El sistema nunca inventa contenido.
ğŸ–¥ï¸ Sitio web â€” Comportamiento
index.html
Muestra el dÃ­a actual del visitante
Alterna:
Poema du jour
Analyse du jour
La fecha (flecha) se muestra a la derecha en el nav
Nunca muestra contenido futuro
Si hoy no existe:
muestra la entrada mÃ¡s reciente â‰¤ hoy
archivo.html
Muestra solo el pasado
Regla:
lista hasta ayer segÃºn el visitante
excluye hoy (porque ya estÃ¡ en index)
excluye todo el futuro
Filtros (mes / autor / bÃºsqueda) se construyen solo con datos visibles
Nunca aparecen meses ni autores futuros
passe.html
Muestra un dÃ­a pasado vÃ­a ?date=YYYY-MM-DD
Alternancia poema/anÃ¡lisis idÃ©ntica a index
Flecha clara
Enlace para volver al dÃ­a actual
âœ’ï¸ ConvenciÃ³n tipogrÃ¡fica especial (alineaciÃ³n poÃ©tica)
Sintaxis en .txt
por |el dinero
|el cansancio
y ||la falta de tiempo
Significado
| â†’ define una ancla de alineaciÃ³n
| al inicio â†’ lÃ­nea alineada bajo la ancla
|| â†’ alineaciÃ³n con prefijo:
el texto antes de || se conserva
lo que sigue se alinea bajo la ancla vigente
Todo se mide con canvas.measureText usando la fuente real del <pre>.
ğŸ“œ Log de publicaciones
Archivo:
logs/publish_log.jsonl
Formato (una lÃ­nea por publicaciÃ³n real):
{
  "date": "2025-12-25",
  "file": "textos/2025-12-25.txt",
  "title": "crecer",
  "keywords": 24,
  "timestamp": "2025-12-26T01:23:45Z"
}
Sirve para:
historial real
debugging
estadÃ­sticas futuras
pÃ¡ginas derivadas
ğŸŒ PublicaciÃ³n y hosting
Repositorio en GitHub
PublicaciÃ³n vÃ­a GitHub Pages
Flujo local principal
ExtensiÃ³n futura prevista (gratis):
GitHub Actions para:
publicar desde iPad
generar keywords vÃ­a script (API opcional)
ejecutar el mismo pipeline en cloud
ğŸ§  FilosofÃ­a del sistema
El humano escribe y decide.
El sistema valida, ensambla y publica.
Un solo gesto activa todo.
Editar el pasado es natural.
Nada irreversible ocurre sin visibilidad previa.
CÃ³digo explÃ­cito > heurÃ­sticas.
Legibilidad > automatismo.